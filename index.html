<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Haneef â€¢ Portfolio</title>

<style>
  body {
    margin:0;
    font-family:sans-serif;
    background:#f5f5f5;
    color:#222;
  }

  header {
    padding:20px;
    background:#111;
    color:#fff;
  }

  nav a {
    margin-right:14px;
    color:#fff;
    text-decoration:none;
  }

  .container {
    width:90%;
    max-width:900px;
    margin:auto;
    padding:20px 0;
  }

  .card {
    background:#fff;
    padding:18px;
    border-radius:12px;
    margin-bottom:18px;
    border:1px solid #ddd;
  }

  h3 {
    margin-top:0;
  }

  /* GAME AREA */
  .game-wrapper {
    display:flex;
    justify-content:center;
    width:100%;
  }

  .play {
    position:relative;
    width:100%;
    max-width:600px;
    height:400px;
    background:#bfe7a1;
    border:2px solid #4caf50;
    border-radius:14px;
    overflow:hidden;
    margin-top:10px;
  }

  .caterpillar-head, .segment {
    position:absolute;
    width:40px;
    height:40px;
    border-radius:50%;
    background:#2e7d32;
  }

  .caterpillar-head::before,
  .caterpillar-head::after {
    content:"";
    position:absolute;
    top:10px;
    width:6px;
    height:6px;
    border-radius:50%;
    background:#fff;
  }
  .caterpillar-head::after { left:20px; }

  .leaf {
    position:absolute;
    width:30px;
    height:30px;
    border-radius:50%;
    background:#66bb6a;
  }

  .win {
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    padding:16px 24px;
    background:#ffeb3b;
    border:2px solid #f9a825;
    border-radius:12px;
    font-weight:bold;
    font-size:18px;
    display:none;
    z-index:10;
    text-align:center;
  }

  .level-label {
    position:absolute;
    top:10px;
    left:10px;
    font-size:18px;
    background:#fff;
    padding:6px 10px;
    border-radius:6px;
    border:1px solid #4caf50;
  }

  /* CIRCULAR ANALOG STYLE D-PAD */
  .dpad {
    position:absolute;
    bottom:10px;
    left:50%;
    transform:translateX(-50%);
    width:140px;
    height:140px;
    background:#111;
    opacity:0.85;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
  }

  .d-button {
    position:absolute;
    width:40px;
    height:40px;
    background:#fff;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:20px;
    font-weight:bold;
    cursor:pointer;
    user-select:none;
  }

  .d-up { top:10px; left:50%; transform:translateX(-50%); }
  .d-down { bottom:10px; left:50%; transform:translateX(-50%); }
  .d-left { left:10px; top:50%; transform:translateY(-50%); }
  .d-right { right:10px; top:50%; transform:translateY(-50%); }

  @media(max-width:640px){
    .dpad { width:120px; height:120px; }
    .d-button { width:36px; height:36px; }
  }
</style>
</head>

<body>

<header>
  <nav>
    <a href="#about">About</a>
    <a href="#work">Work</a>
    <a href="#games">Games</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<main class="container">

  <section id="about" class="card">
    <h3>About Me</h3>
    <p>Hi, I'm Haneef. Cloud engineer, builder, curious mind, and someone who occasionally raises a pixel caterpillar.</p>
  </section>

  <section id="work" class="card">
    <h3>Projects</h3>
    <p>Some of the things I've built.</p>
  </section>

  <!-- GAME SECTION -->
  <section id="games" class="card">
    <h3>Caterpillar Garden</h3>
    <p>A tiny project from 2022 that still eats leaves like it's the first day of spring. Now fully playable inside my portfolio.</p>

    <div class="game-wrapper">
      <div class="play" id="play">
        <div class="level-label" id="levelDisplay">Level: 1</div>
        <div class="caterpillar-head" id="head"></div>
        <div class="win" id="win"></div>

        <!-- D-PAD -->
        <div class="dpad">
          <div class="d-button d-up" data-dir="up">â–²</div>
          <div class="d-button d-down" data-dir="down">â–¼</div>
          <div class="d-button d-left" data-dir="left">â—€</div>
          <div class="d-button d-right" data-dir="right">â–¶</div>
        </div>

      </div>
    </div>
  </section>

</main>

<script>
/* GAME VARIABLES */
const play = document.getElementById('play');
const head = document.getElementById('head');
const winMsg = document.getElementById('win');
const levelDisplay = document.getElementById('levelDisplay');

let headPos = { x: 50, y: 50 };
let speed = 10;
let segments = [];
let leaves = [];
let level = 1;
let maxLevel = 5;
let leavesPerLevel = 5;

/* MOVEMENT */
let direction = null;

function moveCaterpillar(dir) {
  if (dir === 'up') headPos.y -= speed;
  if (dir === 'down') headPos.y += speed;
  if (dir === 'left') headPos.x -= speed;
  if (dir === 'right') headPos.x += speed;

  headPos.x = Math.max(0, Math.min(play.clientWidth - 40, headPos.x));
  headPos.y = Math.max(0, Math.min(play.clientHeight - 40, headPos.y));
}

document.addEventListener('keydown', e => {
  if (e.key === 'w') direction = 'up';
  if (e.key === 's') direction = 'down';
  if (e.key === 'a') direction = 'left';
  if (e.key === 'd') direction = 'right';
});

/* TOUCH CONTROLS */
document.querySelectorAll('.d-button').forEach(btn => {
  btn.addEventListener('touchstart', () => {
    direction = btn.dataset.dir;
  });
});

function startLevel() {
  winMsg.style.display = "none";
  levelDisplay.textContent = "Level: " + level;

  headPos = { x: 50, y: 50 };
  head.style.left = "50px";
  head.style.top = "50px";

  segments.forEach(s => s.remove());
  segments = [];

  leaves.forEach(l => l.remove());
  leaves = [];

  const totalLeaves = leavesPerLevel + (level - 1) * 2;
  for (let i = 0; i < totalLeaves; i++) {
    const leaf = document.createElement('div');
    leaf.className = 'leaf';
    leaf.style.left = Math.random() * (play.clientWidth - 30) + 'px';
    leaf.style.top = Math.random() * (play.clientHeight - 30) + 'px';
    play.appendChild(leaf);
    leaves.push(leaf);
  }
}

function update() {
  if (direction) moveCaterpillar(direction);

  head.style.left = headPos.x + 'px';
  head.style.top = headPos.y + 'px';

  let px = headPos.x, py = headPos.y;
  segments.forEach(seg => {
    const sx = parseFloat(seg.style.left);
    const sy = parseFloat(seg.style.top);

    seg.style.left = sx + (px - sx) * 0.2 + 'px';
    seg.style.top = sy + (py - sy) * 0.2 + 'px';

    px = sx;
    py = sy;
  });

  leaves.forEach((leaf, idx) => {
    if (Math.abs(leaf.offsetLeft - headPos.x) < 35 &&
        Math.abs(leaf.offsetTop - headPos.y) < 35) {

      leaf.remove();
      leaves.splice(idx, 1);
      addSegment();

      if (leaves.length === 0) {
        if (level < maxLevel) {
          winMsg.textContent = `Level ${level} complete! Next level...`;
          winMsg.style.display = "block";
          level++;
          setTimeout(startLevel, 1500);
        } else {
          winMsg.textContent = "ðŸ† Game Completed! Your Caterpillar is a Legend!";
          winMsg.style.display = "block";
        }
      }
    }
  });

  requestAnimationFrame(update);
}

function addSegment() {
  const seg = document.createElement('div');
  seg.className = 'segment';
  seg.style.left = headPos.x + 'px';
  seg.style.top = headPos.y + 'px';
  play.appendChild(seg);
  segments.push(seg);
}

startLevel();
update();
</script>

</body>
</html>
